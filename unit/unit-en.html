<!DOCTYPE html><html lang="en"><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roamwise - Unit Converter</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        :root{--primary:#2563eb;--primary-dark:#1d4ed8;--primary-light:#dbeafe;--accent:#f59e0b;--bg:#f0f4f8;--card:#fff;--text:#1e293b;--text-light:#64748b;--border:#e2e8f0;--radius:12px;--shadow:0 4px 24px rgba(0,0,0,.07);--shadow-sm:0 2px 8px rgba(0,0,0,.05);--green:#10b981;--red:#ef4444}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Noto Sans TC',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}

        header{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:#fff;padding:0 24px;height:60px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;box-shadow:0 2px 12px rgba(37,99,235,.3)}
        .logo{font-size:1.4rem;font-weight:700;letter-spacing:1px;display:flex;align-items:center;gap:8px}.logo span{color:var(--accent)}
        .header-right{display:flex;align-items:center;gap:16px}
        .header-right a{color:rgba(255,255,255,.85);text-decoration:none;font-size:.9rem;transition:color .2s}.header-right a:hover{color:#fff}
        .lang-select{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.3);color:#fff;padding:6px 12px;border-radius:8px;font-size:.85rem;cursor:pointer;font-family:inherit}.lang-select option{color:#333;background:#fff}

        main{flex:1;max-width:920px;width:100%;margin:0 auto;padding:32px 16px}
        .page-title{text-align:center;font-size:1.7rem;font-weight:700;margin-bottom:24px;color:var(--primary-dark)}
        .info-box{background:var(--primary-light);border-left:4px solid var(--primary);border-radius:0 var(--radius) var(--radius) 0;padding:16px 20px;margin-bottom:24px;display:flex;gap:12px;align-items:flex-start;font-size:.92rem;color:var(--primary-dark);line-height:1.6}.info-box .icon{font-size:1.2rem;flex-shrink:0;margin-top:2px}

        .cat-tabs-wrap{margin-bottom:22px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;padding-bottom:4px}
        .cat-tabs-wrap::-webkit-scrollbar{display:none}
        .cat-tabs{display:flex;gap:8px;min-width:max-content}
        .cat-chip{padding:10px 16px;border-radius:24px;border:2px solid var(--border);background:#fff;font-size:.88rem;cursor:pointer;font-family:inherit;transition:all .2s;display:flex;align-items:center;gap:6px;white-space:nowrap;font-weight:500;color:var(--text)}
        .cat-chip:hover{border-color:var(--primary);background:var(--primary-light);color:var(--primary-dark)}
        .cat-chip.active{border-color:var(--primary);background:var(--primary);color:#fff;box-shadow:0 4px 12px rgba(37,99,235,.25)}
        .cat-chip .ci{font-size:1.05rem}

        .converter-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:28px 24px;margin-bottom:20px}
        .converter-row{display:flex;gap:12px;align-items:stretch}
        .conv-side{flex:1;min-width:0}
        .conv-side label{font-weight:500;font-size:.9rem;margin-bottom:8px;display:flex;align-items:center;gap:6px}
        .unit-select{width:100%;padding:12px 40px 12px 14px;border:2px solid var(--border);border-radius:10px;background:#fff;font-size:.93rem;font-family:inherit;font-weight:600;cursor:pointer;appearance:none;-webkit-appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2364748b' viewBox='0 0 16 16'%3E%3Cpath d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;transition:border-color .2s;margin-bottom:10px;color:var(--text)}
        .unit-select:focus,.unit-select:hover{border-color:var(--primary);outline:none;box-shadow:0 0 0 3px rgba(37,99,235,.1)}
        .amount-input{width:100%;padding:14px 16px;border:2px solid var(--border);border-radius:10px;font-size:1.45rem;font-family:inherit;font-weight:700;text-align:right;transition:border-color .2s,box-shadow .2s;color:var(--text)}
        .amount-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(37,99,235,.12)}
        .amount-input.result{background:#f8fafc;color:var(--primary-dark)}
        .swap-col{display:flex;align-items:center;justify-content:center;flex-shrink:0;padding-top:28px}
        .swap-btn{width:48px;height:48px;border-radius:50%;border:2px solid var(--border);background:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.3rem;transition:all .25s;color:var(--primary)}
        .swap-btn:hover{background:var(--primary);color:#fff;border-color:var(--primary);transform:rotate(180deg);box-shadow:0 4px 16px rgba(37,99,235,.3)}

        .formula-display{text-align:center;margin-top:16px;padding:14px;background:linear-gradient(135deg,#f8fafc,#eff6ff);border-radius:10px;border:1px solid var(--border);position:relative}
        .formula-main{font-size:1.03rem;font-weight:600;color:var(--text);margin-bottom:3px;font-variant-numeric:tabular-nums}
        .formula-reverse{font-size:.86rem;color:var(--text-light);font-variant-numeric:tabular-nums}

        .copy-row{display:flex;justify-content:center;gap:10px;margin-top:12px}
        .copy-btn{display:inline-flex;align-items:center;gap:6px;padding:9px 20px;border:1.5px solid var(--border);border-radius:9px;background:#fff;cursor:pointer;font-size:.87rem;font-family:inherit;color:var(--text-light);font-weight:500;transition:all .2s}
        .copy-btn:hover{border-color:var(--primary);color:var(--primary);background:var(--primary-light)}
        .copy-btn.copied{border-color:var(--green);color:var(--green);background:#ecfdf5}

        .toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(80px);background:#1e293b;color:#fff;padding:13px 28px;border-radius:11px;font-size:.92rem;z-index:1000;opacity:0;transition:all .35s cubic-bezier(.4,0,.2,1);pointer-events:none;box-shadow:0 8px 32px rgba(0,0,0,.2);display:flex;align-items:center;gap:8px;white-space:nowrap}
        .toast.show{transform:translateX(-50%) translateY(0);opacity:1}

        .section-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow-sm);border:1px solid var(--border);padding:22px 20px;margin-bottom:20px}
        .section-card h3{font-size:1rem;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:8px;color:var(--text)}

        .all-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:10px}
        .all-tile{border:1px solid var(--border);border-radius:10px;padding:11px 13px;display:flex;flex-direction:column;gap:4px;transition:all .15s;cursor:pointer}
        .all-tile:hover{border-color:var(--primary);box-shadow:var(--shadow-sm)}
        .all-tile.highlight{border-color:var(--primary);background:var(--primary-light)}
        .all-tile .at-name{font-size:.78rem;color:var(--text-light);display:flex;align-items:center;gap:4px}
        .all-tile .at-value{font-size:1.05rem;font-weight:700;color:var(--text);font-variant-numeric:tabular-nums;word-break:break-all}
        .all-tile.highlight .at-value{color:var(--primary-dark)}

        .ref-item{padding:10px 14px;background:#f8fafc;border-radius:8px;margin-bottom:8px;font-size:.9rem;line-height:1.6;border-left:3px solid var(--accent);color:var(--text)}
        .ref-item:last-child{margin-bottom:0}

        .tip-item{margin-bottom:10px;font-size:.92rem;line-height:1.8}
        .tip-item:last-child{margin-bottom:0}

        .calc-note{font-size:.82rem;color:var(--text-light);line-height:1.6;padding:12px 16px;background:#f8fafc;border-radius:8px;margin-top:8px}

        footer{background:#1e293b;color:rgba(255,255,255,.7);padding:36px 24px 20px;margin-top:auto}
        .footer-grid{max-width:920px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:28px;margin-bottom:28px}
        .footer-col h4{color:#fff;font-size:.95rem;margin-bottom:12px;display:flex;align-items:center;gap:6px}
        .footer-col a{display:block;color:rgba(255,255,255,.6);text-decoration:none;font-size:.88rem;padding:4px 0;transition:color .2s}.footer-col a:hover{color:#fff}
        .footer-col a.active-link{color:var(--accent);font-weight:500}
        .footer-bottom{text-align:center;border-top:1px solid rgba(255,255,255,.1);padding-top:16px;font-size:.82rem}.footer-bottom a{color:rgba(255,255,255,.5);text-decoration:none}.footer-bottom a:hover{color:#fff}

        @media(max-width:640px){
            .page-title{font-size:1.3rem}
            .converter-row{flex-direction:column}
            .swap-col{padding-top:0;padding-bottom:0}.swap-btn{transform:rotate(90deg)}.swap-btn:hover{transform:rotate(270deg)}
            .amount-input{font-size:1.2rem}
            .all-grid{grid-template-columns:1fr 1fr}
            .header-right a.contact-link{display:none}
            .converter-card{padding:20px 16px}
            .cat-chip{padding:9px 13px;font-size:.83rem}
        }
    </style>
</head>
<body>

<header>
    <div class="logo">
        <img src="logo.png" alt="Roamwise Logo" class="logo-img">
        Roam<span>wise</span>
    </div>
    <div class="header-right">
        <a href="#" class="contact-link">è¯çµ¡æˆ‘å€‘</a>
        <select class="lang-select" onchange="changeLanguage(this.value)">
            <option value="unit-zh.html" >ç¹é«”ä¸­æ–‡</option>
            <option value="unit-en.html" selected="">English</option>
            <option value="unit-es.html"> EspaÃ±ol</option>
            <option value="unit-pt.html"> PortuguÃªs</option>
        </select>
    </div>
</header>

<script>
    function changeLanguage(filename) {
        window.location.href = filename;
    }
</script>

<main>
    <h1 class="page-title">ğŸ“ Unit Converter</h1>
    <div class="info-box"><span class="icon">â„¹ï¸</span><div>Supports real-time conversion across <strong>10 major categories</strong>: Length, Weight, Temperature, Area, Volume, Speed, Time, Data, Energy, and Power. Covers Taiwan (ping, Taiwanese catty), Hong Kong/Macau (sq ft, HK catty), and internationally standard units. Results display automatically upon input.</div></div>

    <div class="cat-tabs-wrap"><div class="cat-tabs" id="catTabs"></div></div>

    <div class="converter-card">
        <div class="converter-row">
            <div class="conv-side">
                <label>ğŸ“Œ From</label>
                <select class="unit-select" id="fromUnit"></select>
                <input type="text" inputmode="decimal" class="amount-input" id="fromAmount" value="1" placeholder="Enter value">
            </div>
            <div class="swap-col"><button class="swap-btn" id="swapBtn" title="Swap">â‡„</button></div>
            <div class="conv-side">
                <label>ğŸ“Œ Convert To</label>
                <select class="unit-select" id="toUnit"></select>
                <input type="text" class="amount-input result" id="toAmount" placeholder="Result" inputmode="decimal">
            </div>
        </div>
        <div class="formula-display" id="formulaDisplay">
            <div class="formula-main" id="formulaMain"></div>
            <div class="formula-reverse" id="formulaReverse"></div>
        </div>
        <div class="copy-row">
            <button class="copy-btn" id="copyFormula"><span>ğŸ“‹</span> Copy Formula</button>
            <button class="copy-btn" id="copyResult"><span>ğŸ“‹</span> Copy Result</button>
        </div>
    </div>

    <div class="section-card">
        <h3 id="allTitle">ğŸ“‹ All Unit Conversions</h3>
        <div class="all-grid" id="allGrid"></div>
    </div>

    <div class="section-card" id="refSection">
        <h3>ğŸ“ Common References</h3>
        <div id="refList"></div>
    </div>

    <div class="section-card">
        <h3>ğŸ’¡ Conversion Tips</h3>
        <div style="font-size:.92rem;line-height:1.8;color:var(--text)">
            <p class="tip-item">ğŸŒ <strong>Metric vs Imperial</strong>: Most countries use the metric system (meters, kilograms), while the United States, Myanmar, and Liberia primarily use the imperial system (miles, pounds). Knowing the local unit system before traveling helps with everyday communication.</p>
            <p class="tip-item">ğŸ  <strong>HK &amp; Macau Area</strong>: Real estate in Hong Kong and Macau is priced in <strong>square feet (ftÂ²)</strong>. 1 sq ft â‰ˆ 0.093 mÂ². Taiwan commonly uses "ping", where 1 ping â‰ˆ 3.3 mÂ² â‰ˆ 35.6 sq ft.</p>
            <p class="tip-item">âš–ï¸ <strong>Taiwan vs HK Weight Units</strong>: Taiwanese catty = 600g, Taiwanese tael = 37.5g; HK catty â‰ˆ 604.8g, HK tael â‰ˆ 37.8g. The difference is small but worth noting when trading in traditional markets.</p>
            <p class="tip-item">ğŸŒ¡ï¸ <strong>Temperature Reading</strong>: The US uses Fahrenheit (Â°F); most other countries use Celsius (Â°C). Quick mental estimate: Â°F â‰ˆ Â°C Ã— 2 + 30.</p>
            <p class="tip-item">âš¡ <strong>Electricity Billing</strong>: Electricity in Taiwan and Hong Kong/Macau is billed in kilowatt-hours (kWh). 1 kWh = 1,000 watt-hours = 3,600 kilojoules. Knowing your appliance's wattage helps estimate electricity costs.</p>
            <p class="tip-item">â›½ <strong>Fuel Efficiency Conversion</strong>: Taiwan uses km/L, the US uses MPG (miles per gallon), and Europe uses L/100km. Check the local measurement method before refueling.</p>
        </div>
    </div>

    <div class="calc-note">âš ï¸ Conversion results on this site are for reference only. Some units (e.g. months, years) use approximate values. Metric horsepower (PS) and imperial horsepower (hp) differ slightly. For scientific or engineering use, please refer to precise standard values.</div>
</main>

<footer>
<div class="footer-grid">
Â  Â  Â  Â  Â  Â  <div class="footer-col">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸ”Œ Electricity &amp; Time</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="plug/plug-en.html" class="active-link">Power Plug Standards</a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="time-zone/time-zone-en.html">Time Zone Lookup</a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="timer/timer-en.html">Timer</a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="sunrise/sunrise-en.html">Sunrise &amp; Sunset</a>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="footer-col">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸ‰ Holidays &amp; Festivals</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="#">Public Holidays by Country</a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="#">Festivals &amp; Events</a>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="footer-col">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸ’± Finance &amp; Units</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="currency/currency.html">Currency Exchange</a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="unit/unit.html">Unit Converter</a>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="footer-col">
Â  Â  Â  Â  Â  Â  Â  Â  <h4>ğŸŒ Travel Info</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="#">Country Overview</a>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="#">Detailed Regional Guides</a>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="footer-bottom">
Â  Â  Â  Â  Â  Â  Â© 2026 Roamwise. All rights reserved. |
Â  Â  Â  Â  Â  Â  <a href="#">Privacy Policy</a> |
Â  Â  Â  Â  Â  Â  <a href="#">Terms of Use</a>
Â  Â  Â  Â  </div>   
    <div class="footer-bottom">Â© 2026 Roamwise. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Use</a></div>
</footer>

<div class="toast" id="toast"></div>

<script>
// ============ DATA ============
const categories=[
{id:'length',name:'Length',icon:'ğŸ“',dfFrom:'cm',dfTo:'in',
 units:[
  {code:'mm',name:'Millimeter',sym:'mm',toBase:0.001},
  {code:'cm',name:'Centimeter',sym:'cm',toBase:0.01},
  {code:'m',name:'Meter',sym:'m',toBase:1},
  {code:'km',name:'Kilometer',sym:'km',toBase:1000},
  {code:'in',name:'Inch',sym:'in',toBase:0.0254},
  {code:'ft',name:'Foot',sym:'ft',toBase:0.3048},
  {code:'yd',name:'Yard',sym:'yd',toBase:0.9144},
  {code:'mi',name:'Mile',sym:'mi',toBase:1609.344},
  {code:'nmi',name:'Nautical Mile',sym:'nmi',toBase:1852}
 ],
 refs:['1 Foot = 12 Inches â‰ˆ 30.48 cm, commonly used in Hong Kong and Macau','Average adult male height 170 cm â‰ˆ 5 ft 7 in','Full marathon distance 42.195 km â‰ˆ 26.2 mi','A4 paper length â‰ˆ 29.7 cm â‰ˆ 11.69 in']
},
{id:'weight',name:'Weight',icon:'âš–ï¸',dfFrom:'kg',dfTo:'lb',
 units:[
  {code:'mg',name:'Milligram',sym:'mg',toBase:0.001},
  {code:'g',name:'Gram',sym:'g',toBase:1},
  {code:'kg',name:'Kilogram',sym:'kg',toBase:1000},
  {code:'ton',name:'Metric Ton',sym:'t',toBase:1000000},
  {code:'oz',name:'Ounce',sym:'oz',toBase:28.3495},
  {code:'lb',name:'Pound',sym:'lb',toBase:453.592},
  {code:'jin',name:'Taiwanese Catty (Jin)',sym:'tw.jin',toBase:600},
  {code:'tliang',name:'Taiwanese Tael (Liang)',sym:'tw.liang',toBase:37.5},
  {code:'hkjin',name:'HK Catty (SÄ«mÇ Jin)',sym:'hk.jin',toBase:604.79},
  {code:'hkliang',name:'HK Tael (SÄ«mÇ Liang)',sym:'hk.liang',toBase:37.799},
  {code:'st',name:'Stone',sym:'st',toBase:6350.29}
 ],
 refs:['Taiwanese catty = 600g (16 Taiwanese tael), HK catty â‰ˆ 604.8g (16 HK tael), slightly different','1 lb â‰ˆ 453.6g â‰ˆ 0.756 Taiwanese catty â‰ˆ 0.75 HK catty','Airline baggage limit is typically 23 kg â‰ˆ 50.7 lb â‰ˆ 38.3 Taiwanese catties','1 Ounce â‰ˆ 28.35g, commonly called "on-si" in Hong Kong and Macau','HK Tael (SÄ«mÇ Liang) is commonly used in gold trading, 1 HK Tael â‰ˆ 37.8g']
},
{id:'temp',name:'Temperature',icon:'ğŸŒ¡ï¸',dfFrom:'C',dfTo:'F',isTemp:true,
 units:[
  {code:'C',name:'Celsius',sym:'Â°C'},
  {code:'F',name:'Fahrenheit',sym:'Â°F'},
  {code:'K',name:'Kelvin',sym:'K'}
 ],
 refs:['Freezing point of water: 0Â°C = 32Â°F = 273.15 K','Normal human body temperature: 37Â°C â‰ˆ 98.6Â°F','Comfortable room temperature range: 20â€“25Â°C â‰ˆ 68â€“77Â°F','Boiling point of water: 100Â°C = 212Â°F = 373.15 K']
},
{id:'area',name:'Area',icon:'ğŸ“',dfFrom:'ft2',dfTo:'m2',
 units:[
  {code:'cm2',name:'Square Centimeter',sym:'cmÂ²',toBase:0.0001},
  {code:'m2',name:'Square Meter',sym:'mÂ²',toBase:1},
  {code:'km2',name:'Square Kilometer',sym:'kmÂ²',toBase:1e6},
  {code:'ha',name:'Hectare',sym:'ha',toBase:10000},
  {code:'ping',name:'Ping (åª)',sym:'ping',toBase:3.305785},
  {code:'jia',name:'Jia (ç”²)',sym:'jia',toBase:9699.17},
  {code:'ft2',name:'Square Foot',sym:'ftÂ²',toBase:0.092903},
  {code:'yd2',name:'Square Yard',sym:'ydÂ²',toBase:0.836127},
  {code:'ac',name:'Acre',sym:'ac',toBase:4046.86}
 ],
 refs:['Hong Kong and Macau real estate is priced in sq ft (ftÂ²), 1 ftÂ² â‰ˆ 0.093 mÂ²','1 Ping â‰ˆ 3.306 mÂ² â‰ˆ 35.58 ftÂ² (commonly used in Taiwanese real estate)','A typical small Hong Kong flat is 300â€“400 ftÂ² â‰ˆ 27.9â€“37.2 mÂ² â‰ˆ 8.4â€“11.2 ping','1 Jia â‰ˆ 2,934 ping â‰ˆ 0.97 hectares (commonly used for farmland in Taiwan)','Standard football field â‰ˆ 7,140 mÂ² â‰ˆ 76,854 ftÂ²']
},
{id:'volume',name:'Volume',icon:'ğŸ§ª',dfFrom:'L',dfTo:'galUS',
 units:[
  {code:'mL',name:'Milliliter',sym:'mL',toBase:1},
  {code:'L',name:'Liter',sym:'L',toBase:1000},
  {code:'cc',name:'Cubic Centimeter',sym:'cc',toBase:1},
  {code:'m3',name:'Cubic Meter',sym:'mÂ³',toBase:1e6},
  {code:'tsp',name:'Teaspoon',sym:'tsp',toBase:4.929},
  {code:'tbsp',name:'Tablespoon',sym:'tbsp',toBase:14.787},
  {code:'cupUS',name:'US Cup',sym:'cup',toBase:236.588},
  {code:'flozUS',name:'Fluid Ounce',sym:'fl oz',toBase:29.5735},
  {code:'galUS',name:'US Gallon',sym:'gal(US)',toBase:3785.41},
  {code:'galUK',name:'Imperial Gallon',sym:'gal(UK)',toBase:4546.09}
 ],
 refs:['1 Liter = 1,000 mL = 1,000 cc','1 US gallon â‰ˆ 3.785 L, 1 Imperial gallon â‰ˆ 4.546 L','1 US cup â‰ˆ 237 mL (baking measuring cup standard)','1 fluid ounce â‰ˆ 29.6 mL']
},
{id:'speed',name:'Speed',icon:'ğŸš€',dfFrom:'kmh',dfTo:'mph',
 units:[
  {code:'ms',name:'Meters per Second',sym:'m/s',toBase:1},
  {code:'kmh',name:'Kilometers per Hour',sym:'km/h',toBase:0.277778},
  {code:'mph',name:'Miles per Hour',sym:'mph',toBase:0.44704},
  {code:'kn',name:'Knot',sym:'kt',toBase:0.514444},
  {code:'fts',name:'Feet per Second',sym:'ft/s',toBase:0.3048},
  {code:'mach',name:'Mach',sym:'Mach',toBase:343}
 ],
 refs:['Highway speed limit 110 km/h â‰ˆ 68.4 mph','1 Knot = 1.852 km/h (common in nautical and aviation)','Speed of sound (sea level 20Â°C) â‰ˆ 343 m/s â‰ˆ 1,235 km/h','100m world record speed â‰ˆ 37.6 km/h â‰ˆ 23.4 mph']
},
{id:'time',name:'Time',icon:'â±ï¸',dfFrom:'hr',dfTo:'min',
 units:[
  {code:'msec',name:'Millisecond',sym:'ms',toBase:0.001},
  {code:'sec',name:'Second',sym:'s',toBase:1},
  {code:'min',name:'Minute',sym:'min',toBase:60},
  {code:'hr',name:'Hour',sym:'hr',toBase:3600},
  {code:'day',name:'Day',sym:'day',toBase:86400},
  {code:'wk',name:'Week',sym:'wk',toBase:604800},
  {code:'mo',name:'Month (â‰ˆ30 days)',sym:'mo',toBase:2592000},
  {code:'yr',name:'Year (â‰ˆ365 days)',sym:'yr',toBase:31536000}
 ],
 refs:['1 Day = 24 Hours = 1,440 Minutes = 86,400 Seconds','1 Week = 7 Days = 168 Hours','Taipei to Tokyo â‰ˆ 3 hours = 180 minutes','Taipei to Hong Kong â‰ˆ 1 hour 50 minutes']
},
{id:'data',name:'Data',icon:'ğŸ’¾',dfFrom:'GB',dfTo:'MB',
 units:[
  {code:'bit',name:'Bit',sym:'bit',toBase:0.125},
  {code:'B',name:'Byte',sym:'B',toBase:1},
  {code:'KB',name:'Kilobyte',sym:'KB',toBase:1024},
  {code:'MB',name:'Megabyte',sym:'MB',toBase:1048576},
  {code:'GB',name:'Gigabyte',sym:'GB',toBase:1073741824},
  {code:'TB',name:'Terabyte',sym:'TB',toBase:1099511627776},
  {code:'PB',name:'Petabyte',sym:'PB',toBase:1125899906842624}
 ],
 refs:['1 KB = 1,024 Bytes','1 MB = 1,024 KB = 1,048,576 B','1 GB = 1,024 MB (can store approx. 250 MP3 songs)','1 TB = 1,024 GB (can store approx. 250 HD movies)']
},
{id:'energy',name:'Energy',icon:'âš¡',dfFrom:'kWh',dfTo:'kJ',
 units:[
  {code:'J',name:'Joule',sym:'J',toBase:1},
  {code:'kJ',name:'Kilojoule',sym:'kJ',toBase:1000},
  {code:'MJ',name:'Megajoule',sym:'MJ',toBase:1e6},
  {code:'cal',name:'Calorie',sym:'cal',toBase:4.184},
  {code:'kcal',name:'Kilocalorie',sym:'kcal',toBase:4184},
  {code:'Wh',name:'Watt-hour',sym:'Wh',toBase:3600},
  {code:'kWh',name:'Kilowatt-hour',sym:'kWh',toBase:3600000},
  {code:'BTU',name:'British Thermal Unit',sym:'BTU',toBase:1055.06},
  {code:'eV',name:'Electron Volt',sym:'eV',toBase:1.602176634e-19},
  {code:'ft_lb',name:'Foot-pound',sym:'ftÂ·lb',toBase:1.35582}
 ],
 refs:['1 kWh = 3,600 kJ = 860 kcal','Taiwan residential electricity rate â‰ˆ NT$2.5â€“6.4/kWh (progressive tariff)','Hong Kong residential electricity rate â‰ˆ HK$1.0â€“1.6/kWh','A bowl of white rice â‰ˆ 280 kcal â‰ˆ 1,172 kJ','1 BTU â‰ˆ 1,055 J (commonly used for air conditioner capacity)']
},
{id:'power',name:'Power',icon:'ğŸ”Œ',dfFrom:'kW',dfTo:'hp',
 units:[
  {code:'W',name:'Watt',sym:'W',toBase:1},
  {code:'kW',name:'Kilowatt',sym:'kW',toBase:1000},
  {code:'MW',name:'Megawatt',sym:'MW',toBase:1e6},
  {code:'hp',name:'Horsepower (Imperial)',sym:'hp',toBase:745.7},
  {code:'PS',name:'Metric Horsepower',sym:'PS',toBase:735.499},
  {code:'BTUh',name:'BTU/Hour',sym:'BTU/h',toBase:0.293071},
  {code:'kcalh',name:'Kilocalorie/Hour',sym:'kcal/h',toBase:1.163},
  {code:'ftlbs',name:'Foot-pound/Second',sym:'ftÂ·lb/s',toBase:1.35582}
 ],
 refs:['1 Imperial horsepower (hp) = 745.7 W, 1 Metric horsepower (PS) = 735.5 W','Home air conditioner 1 ton of refrigeration â‰ˆ 12,000 BTU/h â‰ˆ 3,517 W','Typical household microwave power â‰ˆ 700â€“1,200 W','Electric vehicle power typically 100â€“400 kW â‰ˆ 134â€“536 hp','Hong Kong voltage 220V/50Hz, Taiwan 110V/60Hz']
}
];

const catMap={};categories.forEach(c=>{catMap[c.id]=c});

// ============ STATE ============
let curCat='length';
let fromU,toU,lastEdited='from';

// ============ HELPERS ============
function getCat(){return catMap[curCat]}
function getUnit(cat,code){return cat.units.find(u=>u.code===code)}

function convertVal(val,fromCode,toCode,cat){
    if(cat.isTemp)return convertTemp(val,fromCode,toCode);
    const fu=getUnit(cat,fromCode),tu=getUnit(cat,toCode);
    if(!fu||!tu)return 0;
    return val*fu.toBase/tu.toBase;
}
function convertTemp(val,from,to){
    let c;
    if(from==='C')c=val;else if(from==='F')c=(val-32)*5/9;else c=val-273.15;
    if(to==='C')return c;if(to==='F')return c*9/5+32;return c+273.15;
}

function fmtNum(n){
    if(n===0)return '0';
    const a=Math.abs(n);
    if(a>=1e15||a<0.0001&&a!==0)return n.toExponential(4);
    let d;
    if(a>=10000)d=2;else if(a>=100)d=3;else if(a>=10)d=4;else if(a>=1)d=5;else if(a>=0.01)d=6;else d=8;
    return n.toLocaleString('zh-TW',{minimumFractionDigits:0,maximumFractionDigits:d});
}
function fmtRate(n){
    if(n===0)return '0';
    const a=Math.abs(n);
    if(a>=1e12||a<0.00001&&a!==0)return n.toExponential(4);
    let d;
    if(a>=1000)d=3;else if(a>=10)d=4;else if(a>=1)d=5;else if(a>=0.01)d=6;else d=8;
    return n.toLocaleString('zh-TW',{minimumFractionDigits:0,maximumFractionDigits:d});
}

// ============ DOM ============
const fromSel=document.getElementById('fromUnit');
const toSel=document.getElementById('toUnit');
const fromAmt=document.getElementById('fromAmount');
const toAmt=document.getElementById('toAmount');
const toastEl=document.getElementById('toast');

// Build tabs
const tabsEl=document.getElementById('catTabs');
categories.forEach(cat=>{
    const chip=document.createElement('button');
    chip.className='cat-chip'+(cat.id===curCat?' active':'');
    chip.dataset.id=cat.id;
    chip.innerHTML='<span class="ci">'+cat.icon+'</span>'+cat.name;
    chip.addEventListener('click',()=>switchCategory(cat.id));
    tabsEl.appendChild(chip);
});

function switchCategory(id){
    curCat=id;
    document.querySelectorAll('.cat-chip').forEach(c=>c.classList.toggle('active',c.dataset.id===id));
    const cat=getCat();
    fromU=cat.dfFrom;toU=cat.dfTo;
    populateSelects();
    fromAmt.value='1';lastEdited='from';
    doConvert();updateAllGrid();updateRefs();
}

function populateSelects(){
    const cat=getCat();
    fromSel.innerHTML='';toSel.innerHTML='';
    cat.units.forEach(u=>{
        const o1=document.createElement('option');
        o1.value=u.code;o1.textContent=u.name+' ('+u.sym+')';
        if(u.code===fromU)o1.selected=true;
        fromSel.appendChild(o1);
        const o2=document.createElement('option');
        o2.value=u.code;o2.textContent=u.name+' ('+u.sym+')';
        if(u.code===toU)o2.selected=true;
        toSel.appendChild(o2);
    });
}

function doConvert(){
    const cat=getCat();
    fromU=fromSel.value;toU=toSel.value;
    if(lastEdited==='from'){
        const v=parseFloat(fromAmt.value.replace(/,/g,''));
        if(isNaN(v)||fromAmt.value.trim()===''){toAmt.value='';updateFormula();return}
        toAmt.value=fmtNum(convertVal(v,fromU,toU,cat));
    }else{
        const v=parseFloat(toAmt.value.replace(/,/g,''));
        if(isNaN(v)||toAmt.value.trim()===''){fromAmt.value='';updateFormula();return}
        fromAmt.value=fmtNum(convertVal(v,toU,fromU,cat));
    }
    updateFormula();updateAllGrid();
}

function updateFormula(){
    const cat=getCat();
    const fu=getUnit(cat,fromU),tu=getUnit(cat,toU);
    if(!fu||!tu)return;
    const r1=convertVal(1,fromU,toU,cat),r2=convertVal(1,toU,fromU,cat);
    document.getElementById('formulaMain').textContent='1 '+fu.name+' ('+fu.sym+') = '+fmtRate(r1)+' '+tu.name+' ('+tu.sym+')';
    document.getElementById('formulaReverse').textContent='1 '+tu.name+' ('+tu.sym+') = '+fmtRate(r2)+' '+fu.name+' ('+fu.sym+')';
}

function updateAllGrid(){
    const cat=getCat();const grid=document.getElementById('allGrid');grid.innerHTML='';
    let baseVal=parseFloat(fromAmt.value.replace(/,/g,''));
    if(isNaN(baseVal))baseVal=0;
    const fromCode=fromU;
    const fu=getUnit(cat,fromCode);
    document.getElementById('allTitle').textContent='ğŸ“‹ '+fmtNum(baseVal)+' '+(fu?fu.sym:'')+' equalsâ€¦';
    cat.units.forEach(u=>{
        const tile=document.createElement('div');
        tile.className='all-tile';
        if(u.code===fromU||u.code===toU)tile.classList.add('highlight');
        const val=convertVal(baseVal,fromCode,u.code,cat);
        tile.innerHTML='<div class="at-name">'+u.name+' ('+u.sym+')</div><div class="at-value">'+fmtNum(val)+'</div>';
        tile.addEventListener('click',()=>{toU=u.code;toSel.value=u.code;lastEdited='from';doConvert()});
        grid.appendChild(tile);
    });
}

function updateRefs(){
    const cat=getCat();const list=document.getElementById('refList');list.innerHTML='';
    (cat.refs||[]).forEach(r=>{const d=document.createElement('div');d.className='ref-item';d.textContent=r;list.appendChild(d)});
}

// ============ COPY FUNCTIONS ============
function showToast(msg){
    toastEl.textContent='';
    toastEl.innerHTML='<span style="font-size:1.1rem">âœ…</span> '+msg;
    toastEl.classList.add('show');
    clearTimeout(showToast._t);
    showToast._t=setTimeout(()=>toastEl.classList.remove('show'),2200);
}

function getFormulaText(){
    const cat=getCat();const fu=getUnit(cat,fromU),tu=getUnit(cat,toU);
    if(!fu||!tu)return '';
    const r1=convertVal(1,fromU,toU,cat);
    return '1 '+fu.name+' ('+fu.sym+') = '+fmtRate(r1)+' '+tu.name+' ('+tu.sym+')';
}
function getResultText(){
    const cat=getCat();const fu=getUnit(cat,fromU),tu=getUnit(cat,toU);
    if(!fu||!tu)return '';
    const fv=fromAmt.value.trim(),tv=toAmt.value.trim();
    if(!fv||!tv)return '';
    return fv+' '+fu.name+' ('+fu.sym+') = '+tv+' '+tu.name+' ('+tu.sym+')';
}

function doCopy(text,btnEl){
    if(!text)return;
    navigator.clipboard.writeText(text).then(()=>{
        showToast('Copied to clipboard');
        btnEl.classList.add('copied');
        btnEl.innerHTML='<span>âœ…</span> Copied';
        setTimeout(()=>{
            btnEl.classList.remove('copied');
            if(btnEl.id==='copyFormula')btnEl.innerHTML='<span>ğŸ“‹</span> Copy Formula';
            else btnEl.innerHTML='<span>ğŸ“‹</span> Copy Result';
        },2000);
    }).catch(()=>{
        /* fallback for sandbox */
        const ta=document.createElement('textarea');ta.value=text;ta.style.position='fixed';ta.style.left='-9999px';
        document.body.appendChild(ta);ta.select();
        try{document.execCommand('copy');showToast('Copied to clipboard');btnEl.classList.add('copied');btnEl.innerHTML='<span>âœ…</span> Copied';setTimeout(()=>{btnEl.classList.remove('copied');if(btnEl.id==='copyFormula')btnEl.innerHTML='<span>ğŸ“‹</span> Copy Formula';else btnEl.innerHTML='<span>ğŸ“‹</span> Copy Result';},2000)}catch(e){}
        document.body.removeChild(ta);
    });
}

document.getElementById('copyFormula').addEventListener('click',function(){doCopy(getFormulaText(),this)});
document.getElementById('copyResult').addEventListener('click',function(){doCopy(getResultText(),this)});

// ============ INPUT EVENTS ============
function sanitizeInput(el,allowNeg){
    let v=el.value;
    if(allowNeg){v=v.replace(/[^0-9.\-]/g,'')}else{v=v.replace(/[^0-9.]/g,'')}
    // only one dot
    const pts=v.split('.');if(pts.length>2)v=pts[0]+'.'+pts.slice(1).join('');
    // only leading minus
    if(allowNeg&&v.lastIndexOf('-')>0){const first=v[0]==='-'?'-':'';v=first+v.replace(/-/g,'')}
    el.value=v;
}

fromAmt.addEventListener('input',()=>{lastEdited='from';sanitizeInput(fromAmt,getCat().isTemp);doConvert()});
fromAmt.addEventListener('focus',()=>{lastEdited='from';fromAmt.select()});
toAmt.addEventListener('input',()=>{lastEdited='to';sanitizeInput(toAmt,getCat().isTemp);doConvert()});
toAmt.addEventListener('focus',()=>{lastEdited='to';toAmt.select()});
fromSel.addEventListener('change',()=>{fromU=fromSel.value;lastEdited='from';doConvert()});
toSel.addEventListener('change',()=>{toU=toSel.value;lastEdited='from';doConvert()});

document.getElementById('swapBtn').addEventListener('click',()=>{
    const tmp=fromU;fromU=toU;toU=tmp;
    fromSel.value=fromU;toSel.value=toU;
    const tmpV=fromAmt.value;fromAmt.value=toAmt.value;toAmt.value=tmpV;
    lastEdited='from';doConvert();
});

// ============ INIT ============
(function init(){
    const cat=getCat();fromU=cat.dfFrom;toU=cat.dfTo;
    populateSelects();fromAmt.value='1';lastEdited='from';
    doConvert();updateRefs();
})();
</script>


</body></html>
